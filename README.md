# Wake-Lean-Engine

由于 leancloud 的免费云服务开启了流控，在半小时内没有请求就会进入休眠。每当有请求时才会再次启动，如果一个用户的请求正好遇到了休眠状态，这个用户收到响应的时间长达 2~10 秒，直到半个小时没有请求后则进入休眠，本程序的目的就是压榨服务器的工作时间

## 原理

利用定时函数发送 GET，发送请求时也对自己发送一次请求，达到双方都唤醒的目的，但是 leancloud 的免费服务器只能运行 18 小时，所以需要部署两个服务器，互相倒班唤醒即可（真是保姆级别的服务啊）

## 使用方式

创建两个应用，并设置环境变量

必须的环境变量：

+ `WAKE1`：唤醒服务器域名（打工仔）
+ `WAKE2`：唤醒服务器域名（另一个打工仔）
+ `CALL_URLS`：需要被唤醒的服务器域名，可以设置多个，以`;`分隔

可选的环境变量：

+ `INTERVAL_TIME`：唤醒时间，默认`1500000`ms = 25 分钟

其中两个应用的`WAKE1`和`WAKE2`的值必须是相同的顺序
